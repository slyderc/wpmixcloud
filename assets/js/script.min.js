!function(o){"use strict";if(o=window.jQuery||window.$){var t=null,e=null;if("loading"===document.readyState?o(document).ready(l):l(),o(document).ready(l),o(window).on("load",l),setTimeout(l,100),setTimeout(l,500),setTimeout(l,1e3),o(document).on("wp-mixcloud-refresh",l),window.MutationObserver){var d=new MutationObserver(function(t){var e=!1;t.forEach(function(t){t.addedNodes.length&&t.addedNodes.forEach(function(t){1===t.nodeType&&(o(t).hasClass("mixcloud-play-button")||o(t).find(".mixcloud-play-button").length)&&(e=!0)})}),e&&setTimeout(n,100)});o(document).ready(function(){document.body&&d.observe(document.body,{childList:!0,subtree:!0})})}window.wpMixcloudArchivesRefresh=l,o(document).one("click touchstart",function(){setTimeout(l,50)})}else console.error("WP Mixcloud Archives: jQuery not found");function n(){o(document).off("click.wpmixcloud",".mixcloud-play-button"),o(document).off("click.wpmixcloud",".mixcloud-modal-close"),o(document).off("click.wpmixcloud",".mixcloud-modal-overlay");var d=o(".mixcloud-play-button");window.console&&window.console.log&&console.log("WP Mixcloud Archives: Found "+d.length+" play buttons"),o(document).on("click.wpmixcloud",".mixcloud-play-button",function(d){d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),window.console&&window.console.log&&console.log("WP Mixcloud Archives: Play button clicked");const n=o(this);if(n.hasClass("disabled")||n.prop("disabled"))return window.console&&window.console.log&&console.log("WP Mixcloud Archives: Button is disabled, ignoring click"),!1;const i=n.attr("data-cloudcast-url")||n.data("cloudcast-url"),l=n.attr("data-cloudcast-name")||n.data("cloudcast-name"),a=n.attr("data-cloudcast-key")||n.data("cloudcast-key"),r=n.attr("data-cloudcast-image")||n.data("cloudcast-image");return window.console&&window.console.log&&console.log("WP Mixcloud Archives: Button data - Key:",a,"URL:",i),i&&a?function(d,n,i,l){const a=o("#mixcloud-player-modal");if(!a.length)return void console.error("WP Mixcloud Archives: Modal container not found");t&&c();const r=a.find(".mixcloud-modal-image");l&&""!==l?r.attr("src",l).attr("alt",n||"Show artwork"):r.attr("src","").attr("alt","");const u={feed:encodeURIComponent(i),mini:"1",light:"0",hide_cover:"1",hide_artwork:"1"},s="https://www.mixcloud.com/widget/iframe/?"+Object.keys(u).map(o=>o+"="+u[o]).join("&"),m=o("<iframe>").attr("src",s).attr("width","100%").attr("height","120").attr("frameborder","0").attr("allowfullscreen",!0).attr("title","Mixcloud player for "+(n||"show"));a.find(".mixcloud-modal-player-container").empty().append(m),a.addClass("active"),t=a,e=m[0],o("body").addClass("mixcloud-modal-open"),a.attr("tabindex","-1").focus()}(0,l,a,r):window.console&&window.console.log&&console.log("WP Mixcloud Archives: Missing required data attributes"),!1}),o(document).on("click.wpmixcloud",".mixcloud-modal-close",function(o){return o.preventDefault(),c(),!1}),o(document).on("click.wpmixcloud",".mixcloud-modal-overlay",function(o){return o.preventDefault(),c(),!1}),o(document).on("keydown.wpmixcloud",function(o){"Escape"===o.key&&t&&c()})}function c(){t&&(e&&(o(e).remove(),e=null),t.removeClass("active"),t=null,o("body").removeClass("mixcloud-modal-open"),o(document).focus())}function i(){o(document).off("click.wpmixcloud-dropdown"),o(document).on("click.wpmixcloud-dropdown",".mixcloud-dropdown-selected",function(t){t.preventDefault(),t.stopPropagation();const e=o(this).closest(".mixcloud-custom-dropdown"),d=e.find(".mixcloud-dropdown-options"),n=e.hasClass("open");o(".mixcloud-custom-dropdown").removeClass("open"),o(".mixcloud-dropdown-options").hide(),n?(o(this).attr("aria-expanded","false"),d.attr("aria-hidden","true")):(e.addClass("open"),d.show(),o(this).attr("aria-expanded","true"),d.attr("aria-hidden","false"))}),o(document).on("click.wpmixcloud-dropdown",".mixcloud-dropdown-option",function(t){t.preventDefault(),t.stopPropagation();const e=o(this),d=e.closest(".mixcloud-custom-dropdown"),n=d.find(".mixcloud-dropdown-selected"),c=d.find(".mixcloud-dropdown-options"),i=e.data("value"),l=e.text();n.find(".mixcloud-dropdown-text").text(l),d.attr("data-current-filter",i),c.find(".mixcloud-dropdown-option").removeClass("mixcloud-dropdown-option-active").attr("aria-selected","false"),e.addClass("mixcloud-dropdown-option-active").attr("aria-selected","true"),d.removeClass("open"),c.hide(),n.attr("aria-expanded","false"),c.attr("aria-hidden","true"),function(t){const e=o(".mixcloud-list-item");"all"===t?e.show():e.each(function(){const e=o(this),d=e.find(".mixcloud-list-title").text().replace(/[–•]/g,"-"),n=t.replace(/[–•]/g,"-");d.toLowerCase().includes(n.toLowerCase())?e.show():e.hide()});o(document).trigger("wp-mixcloud-filter-applied",[t])}(i)}),o(document).on("click.wpmixcloud-dropdown",function(t){o(t.target).closest(".mixcloud-custom-dropdown").length||(o(".mixcloud-custom-dropdown").removeClass("open"),o(".mixcloud-dropdown-options").hide(),o(".mixcloud-dropdown-selected").attr("aria-expanded","false"),o(".mixcloud-dropdown-options").attr("aria-hidden","true"))}),o(document).on("keydown.wpmixcloud-dropdown",".mixcloud-dropdown-selected",function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),o(this).click())}),o(document).on("keydown.wpmixcloud-dropdown",".mixcloud-dropdown-option",function(t){const e=o(this).closest(".mixcloud-dropdown-options"),d=e.find(".mixcloud-dropdown-option"),n=d.index(this);switch(t.key){case"Enter":case" ":t.preventDefault(),o(this).click();break;case"ArrowDown":t.preventDefault();const c=(n+1)%d.length;d.eq(c).focus();break;case"ArrowUp":t.preventDefault();const i=(n-1+d.length)%d.length;d.eq(i).focus();break;case"Escape":t.preventDefault();const l=o(this).closest(".mixcloud-custom-dropdown");l.removeClass("open"),e.hide(),l.find(".mixcloud-dropdown-selected").focus()}})}function l(){n(),i()}}(jQuery);