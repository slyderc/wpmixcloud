!function(t){"use strict";if(!(t=window.jQuery||window.$))return void console.error("WP Mixcloud Archives: jQuery not found");var o=null;function e(){function e(t){t.style.opacity="0",setTimeout(()=>{const o=t.getAttribute("data-original-content");o&&(t.innerHTML=o,t.removeAttribute("data-original-content")),t.classList.remove("mixcloud-player-active"),t.style.opacity="1"},300)}t(document).off("click.wpmixcloud",".mixcloud-play-button"),t(document).on("click.wpmixcloud",".mixcloud-play-button",function(n){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();const i=this,c=t(i).closest(".mixcloud-list-item"),r=c.find(".mixcloud-list-waveform").first(),s=t(i).attr("data-cloudcast-url"),a=t(i).attr("data-cloudcast-name"),d=t(i).attr("data-cloudcast-key");return r.length&&s&&d&&function(t,n,i,c,r){const s=n.querySelector("iframe.mixcloud-player-iframe");o&&o!==n&&e(o);s?(e(n),o=null):(!function(t,o,e,n){const i=t.innerHTML;t.setAttribute("data-original-content",i);const c={feed:encodeURIComponent(n),hide_cover:"1",mini:"1",light:"0",hide_artwork:"1",hide_follow:"1"},r=Object.keys(c).map(t=>t+"="+c[t]).join("&"),s="https://www.mixcloud.com/widget/iframe/?"+r,a=document.createElement("iframe");a.src=s,a.className="mixcloud-player-iframe",a.width="100%",a.height="60",a.frameBorder="0",a.allowFullscreen=!0,a.title="Mixcloud player for "+e,t.innerHTML="",t.appendChild(a),t.classList.add("mixcloud-player-active"),t.style.opacity="0",setTimeout(()=>{t.style.transition="opacity 0.3s ease",t.style.opacity="1"},10)}(n,0,c,r),o=n,setTimeout(()=>{t.getBoundingClientRect().bottom>window.innerHeight&&t.scrollIntoView({behavior:"smooth",block:"center"})},100))}(c[0],r[0],0,a,d),!1})}function n(){function o(t,o){t.attr("aria-expanded","false"),o.removeClass("mixcloud-dropdown-open"),t.focus()}t(document).off("click.wpmixcloud-dropdown"),t(document).on("click.wpmixcloud-dropdown",".mixcloud-dropdown-selected",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const n=t(this).closest(".mixcloud-custom-dropdown"),i=t(this),c=n.find(".mixcloud-dropdown-options");return"true"===i.attr("aria-expanded")?o(i,c):function(t,o){t.attr("aria-expanded","true"),o.addClass("mixcloud-dropdown-open");const e=o.find(".mixcloud-dropdown-option").first();e.length&&e.focus()}(i,c),!1}),t(document).on("click.wpmixcloud-dropdown",".mixcloud-dropdown-option",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const n=t(this),i=n.closest(".mixcloud-custom-dropdown"),c=i.find(".mixcloud-dropdown-selected"),r=i.find(".mixcloud-dropdown-options"),s=i.find(".mixcloud-dropdown-text");return function(t,e,n,i,c){const r=t.attr("data-value"),s=t.text();c.text(s),e.find(".mixcloud-dropdown-option").removeClass("mixcloud-dropdown-option-active").attr("aria-selected","false"),t.addClass("mixcloud-dropdown-option-active").attr("aria-selected","true"),e.attr("data-current-filter",r),function(t){const o=document.querySelectorAll(".mixcloud-list-item");o.forEach(o=>{let e=o.querySelector(".mixcloud-list-title").textContent;const n=["•","–","-","|",":"];let i=!1;for(const t of n){if(i)break;const o=e.lastIndexOf(t);if(-1!==o){const n=e.substring(0,o).trim(),c=e.substring(o+t.length).trim(),r=[/^(0?[1-9]|1[0-2])-(0?[1-9]|[12][0-9]|3[01])-(20\d{2}|19\d{2})$/,/^\d{1,2}\/\d{1,2}\/\d{2,4}$/,/^\d{4}-\d{1,2}-\d{1,2}$/,/^\d{1,2}\.\d{1,2}\.\d{2,4}$/,/^(0?[1-9]|1[0-2])–(0?[1-9]|[12][0-9]|3[01])-(20\d{2}|19\d{2})$/,/^(20\d{2}|19\d{2})$/];for(const t of r)if(t.test(c)){e=n,i=!0;break}}}e=e.replace(/[–•]/g,"-"),"all"===t||e===t?o.style.display="flex":o.style.display="none"})}(r),o(n,i)}(n,i,c,r,s),!1}),t(document).on("click.wpmixcloud-outside",function(e){t(e.target).closest(".mixcloud-custom-dropdown").length||t('.mixcloud-dropdown-selected[aria-expanded="true"]').each(function(){const e=t(this),n=e.siblings(".mixcloud-dropdown-options");o(e,n)})})}function i(t){const o=t.getAttribute("data-src");if(!o)return;t.classList.add("mixcloud-artwork-loading");const e=new Image;e.onload=function(){t.src=o,t.classList.remove("mixcloud-artwork-loading"),t.classList.add("mixcloud-artwork-loaded"),t.removeAttribute("data-src")},e.onerror=function(){t.classList.remove("mixcloud-artwork-loading"),c(t)},e.src=o}function c(t){const o=t.parentElement;t.style.display="none";const e=document.createElement("div");e.className="mixcloud-artwork-error",e.innerHTML='<span class="dashicons dashicons-format-audio"></span>',e.setAttribute("aria-label",wpMixcloudArchives.noArtworkText),o.appendChild(e)}new Map;function r(){document.querySelectorAll(".mixcloud-social-btn").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();const o=this.getAttribute("data-platform"),e=this.closest(".mixcloud-social-sharing");if(!e)return;!function(t,o,e,n,i){let c="";switch(t){case"facebook":c="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(o);break;case"twitter":c="https://twitter.com/intent/tweet?text="+encodeURIComponent(e+" - "+n)+"&url="+encodeURIComponent(o);break;case"bluesky":c="https://bsky.app/intent/compose?text="+encodeURIComponent(e+" - "+n+" "+o);break;case"copy":return void function(t,o){navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t).then(function(){a(o)}).catch(function(e){s(t,o)}):s(t,o)}(o,i)}if(c){"undefined"!=typeof gtag&&gtag("event","share",{method:t,content_type:"mixcloud_track",content_id:o});const e=window.open(c,"social-share","width=600,height=400,scrollbars=yes,resizable=yes");e&&e.focus()}}(o,e.getAttribute("data-url"),e.getAttribute("data-title"),e.getAttribute("data-description"),this)})})}function s(t,o){const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")?a(o):d(o)}catch(t){d(o)}document.body.removeChild(e)}function a(t){const o=t.innerHTML,e=t.className;t.classList.add("copied"),t.innerHTML='<span class="dashicons dashicons-yes"></span><span class="mixcloud-social-label">Copied!</span>',"undefined"!=typeof gtag&&gtag("event","copy_link",{event_category:"social_sharing",event_label:"mixcloud_track"}),setTimeout(function(){t.className=e,t.innerHTML=o},2e3)}function d(t){const o=t.innerHTML;t.innerHTML='<span class="dashicons dashicons-no"></span><span class="mixcloud-social-label">Failed</span>',setTimeout(function(){t.innerHTML=o},2e3)}function l(){e(),n(),function(){const t=document.querySelectorAll(".mixcloud-artwork[data-src]");if(0!==t.length)if("IntersectionObserver"in window){const o=new IntersectionObserver(function(t,o){t.forEach(function(t){if(t.isIntersecting){const e=t.target;i(e),o.unobserve(e)}})},{rootMargin:"25px",threshold:.1});t.forEach(function(t){o.observe(t)})}else t.forEach(function(t){i(t)})}(),function(){const t=document.querySelectorAll(".mixcloud-stats");if("IntersectionObserver"in window){const o=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&t.target.classList.add("mixcloud-stats-visible")})},{threshold:.5});t.forEach(function(t){o.observe(t)})}}(),document.querySelectorAll(".mixcloud-artwork").forEach(function(t){t.addEventListener("error",function(){c(t)},{once:!0})}),r()}t(document).ready(function(){setTimeout(l,100)}),t(document).on("wp-mixcloud-archives-refresh",l)}(window.jQuery),window.wpMixcloudArchivesRefresh=function(){jQuery(document).trigger("wp-mixcloud-archives-refresh")};